<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <title></title>   
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css">
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    
    <script>
window.addEventListener("DOMContentLoaded", () => {

  const scene = document.querySelector("a-scene");

  // Espera o MindAR iniciar
  scene.addEventListener("renderstart", () => {

    const raycaster = new THREE.Raycaster();
    const mouse = new THREE.Vector2();
    const camera = scene.camera;

    function checkHit(x, y) {
      // Normaliza coordenadas
      mouse.x = (x / window.innerWidth) * 2 - 1;
      mouse.y = -(y / window.innerHeight) * 2 + 1;

      raycaster.setFromCamera(mouse, camera);

      const clickable = Array.from(document.querySelectorAll(".clickable"))
        .map(el => el.object3D);

      const intersects = raycaster.intersectObjects(clickable, true);

      if (intersects.length > 0) {
        const obj = intersects[0].object.el;

        if (!obj) return;

        if (obj.hasAttribute("open-insta")) {
          window.location.href = "https://instagram.com";
        }
        if (obj.hasAttribute("open-face")) {
          window.location.href = "https://facebook.com";
        }
        if (obj.hasAttribute("open-whats")) {
          window.location.href = "https://wa.me/000000000";
        }
        
        //CONTRILE AUDIO
        if (obj.hasAttribute("open-audio")) {
            const audio = document.getElementById("audioVoz");
            audio.currentTime = 0;
            audio.play();
        }

      }
    }

    // Evento de toque na tela (mobile)
    window.addEventListener("touchstart", e => {
      const t = e.touches[0];
      checkHit(t.clientX, t.clientY);
    });

    // Evento de clique (desktop)
    window.addEventListener("mousedown", e => {
      checkHit(e.clientX, e.clientY);
    });

  });
});
</script>

    
  </head>
  <body>
    <a-scene mindar-image="imageTargetSrc: Imagens/targets.mind;" color-space="sRGB" renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false">
      <a-assets>
        <img id="card" src="Imagens/Cartao.jpg" />
        <!-- Ícones das redes (adicione seus arquivos aqui) -->
        <img id="instaIcon" src="Imagens/btn_Instagram.png">
        <img id="faceIcon" src="Imagens/btn_Facebook.png">
        <img id="whatsIcon" src="Imagens/btn_Whatsapp.png">
        <img id="audioIcon" src="Imagens/btn_Audio.png">
        <audio id="audioVoz" src="Audios/Dialogo_Cartao.mp3"></audio>
        <a-asset-item id="avatarModel" src="Modelos/Casa.glb"></a-asset-item>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"><a-cursor rayOrigin="mouse"></a-cursor></a-camera>
      
      <a-entity mindar-image-target="targetIndex: 0">
        <a-plane src="#card" position="0 0 0" height="0.552" width="1" rotation="0 0 0"></a-plane>
       <a-gltf-model  rotation="90 0 0" position="0.03401 0.79708 0.05371" scale="0.15505 0.15505 0.15505" src="#avatarModel" gltf-model="Modelos/Casa.glb"></a-gltf-model>
     
      
      <!-- BOTÕES DE REDES SOCIAIS COMO BUTTONS COM IMAGENS -->
        <a-image src="#instaIcon" position="-0.37193 -0.43656 0.03978" width="0.22" height="0.22" open-insta="" class="clickable">
        </a-image>

        <a-image  src="#faceIcon" position="-0.02081 -0.45525 0.04643" width="0.22" height="0.22" open-face="" class="clickable">
        </a-image>

        <a-image src="#whatsIcon"  position="0.35 -0.45 0.05" width="0.22" height="0.22" open-whats=""  class="clickable">
        </a-image>
        
        <a-image  src="#audioIcon" position="0.67131 -0.027 0.02927" width="0.22" height="0.22" open-audio="" class="clickable">
        </a-image>
 </a-entity>
      
    </a-scene>
  </body>
</html>